# 🔄 reset / revert / reflog 차이 정리

## 1️⃣ 한 줄 요약부터

| 개념         | 정체                               |
| ---------- | -------------------------------- |
| **reset**  | 브랜치를 과거로 **되돌림 (기록을 바꿈)**        |
| **revert** | 되돌린 내용을 **새 커밋으로 남김 (기록 보존)**    |
| **reflog** | HEAD가 **어디로 이동했는지의 이력 (복구용 기록)** |

---

## 2️⃣ reset — “시간을 되감는다”

### 📌 개념

* 브랜치 포인터를 **과거 커밋으로 이동**
* **커밋 기록이 바뀜**
* 이미 push된 브랜치에 쓰면 **위험**

### 📌 종류

| 옵션             | 커밋   | staging | working tree |
| -------------- | ---- | ------- | ------------ |
| `--soft`       | ❌ 삭제 | ✅ 유지    | ✅ 유지         |
| `--mixed` (기본) | ❌ 삭제 | ❌ 제거    | ✅ 유지         |
| `--hard`       | ❌ 삭제 | ❌ 제거    | ❌ 제거         |

### 📌 예시

```bash
git reset --soft HEAD~1   # 커밋만 취소
git reset --hard HEAD~3   # 커밋 + 코드 전부 제거
```

### 📌 언제 쓰나?

* **개인 브랜치**
* 아직 PR / 공유 전
* 커밋 정리, 브랜치 실수 복구

---

## 3️⃣ revert — “역작업 커밋을 만든다”

### 📌 개념

* 특정 커밋을 **되돌리는 새 커밋 생성**
* 기존 히스토리는 **절대 안 바꿈**
* 협업 환경에서 안전

### 📌 예시

```bash
git revert <커밋해시>
```

결과:

```
A → B → C → D
          ↓
A → B → C → D → D'
```

(D' = D를 되돌리는 커밋)

### 📌 언제 쓰나?

* **이미 main / shared 브랜치에 push됨**
* 히스토리 변경 금지
* 장애 대응, 롤백

---

## 4️⃣ reflog — “사라진 걸 찾는다”

### 📌 개념

* **HEAD / 브랜치 이동 로그**
* 커밋 삭제 후에도 **복구 가능**
* 직접 뭔가를 되돌리지는 않음 (도구)

### 📌 예시

```bash
git reflog
git reset --hard HEAD@{2}
git cherry-pick <커밋해시>
```

### 📌 언제 쓰나?

* reset / rebase / force push 후 망했을 때
* “커밋이 날아갔다” 싶을 때
* **복구 전용**

---

## 5️⃣ 실무 기준 선택 가이드 (중요)

### ❓ 커밋을 지워야 하나?

* **혼자 쓰는 브랜치** → `reset`
* **공유 브랜치** → ❌ reset 금지

### ❓ 이미 push됐나?

* **YES** → `revert`
* **NO** → `reset`

### ❓ 이미 사고 났나?

* **YES** → `reflog`

---

## 6️⃣ 실전 시나리오 예제

### 🔥 잘못된 브랜치에 커밋함

* 해결:
  `reset` + `reflog` + `cherry-pick`

### 🔥 main에 버그 커밋 올라감

* 해결:
  `revert`

### 🔥 reset --hard 하고 커밋 사라짐

* 해결:
  `reflog`

---

## 7️⃣ 핵심 문장 (기억용)

> * **reset**: 기록을 바꾼다
> * **revert**: 기록을 쌓는다
> * **reflog**: 기록을 찾는다

이 세 문장만 정확히 기억하면 Git에서 크게 사고 안 난다.